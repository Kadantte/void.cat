<html>

<head>
	<script>
		if ('serviceWorker' in navigator) {
			navigator.serviceWorker.register('/void_auto_loader.js').then(function (registration) {
				console.log(`ServiceWorker registration successful with scope: ${registration.scope}`);

				navigator.serviceWorker.addEventListener('message', function (event) {
                    /*	get the key + iv from the page
						if you have multiple links on the page 
						you need to map the id to the kev:iv
						for the purposes of an example i will pass
						hard coded values
					*/
					event.ports[0].postMessage({
						key: "51f1ab8e9e533e2296499357cd9f001c",
						iv: "a5528ae5a90f6e116cfb84a1e653f889"
					});
				});
			}, function (err) {
				console.error(`ServiceWorker registration failed: ${err}`);
			});
		}
	</script>
</head>

<body>
	<!-- 
			Path must be to the current host, the service worker will pick this up and redirect the request to the correct server
			Keep in mind that the entire file is loaded and decrypted into memory, so it can look like nothing is happening while the file is loading.
			Currently its not advised to use this example for anything other than images that can be downloaded fast
			Check other examples for videos, this may be added at a later stage

			If you already have multiple service workers or this one doesnt work, try to load the service worker under a fake folder name and prefix all the urls with that
			for example: 
			<img src="/void_proxy/Jet0iBptr3AyVu1tUiPTAn5y3VY" />
		-->
	<img src="/Jet0iBptr3AyVu1tUiPTAn5y3VY" />
</body>

</html>